{{ 'newsletter-mag.css' | asset_url | stylesheet_tag }}

<section class="grid mt-14 md:mt-18">
    <!-- Background image -->
    {% if section.settings.bg_image %}
        <div class="col-start-1 row-start-1">
            <img src="{{ section.settings.bg_image | image_url: width: 1600 }}"
                 alt="Newsletter background"
                 class="w-full h-full object-cover">
        </div>
    {% endif %}

    <!-- Overlay for better text contrast -->
    {% comment %} <div class="absolute inset-0 bg-black/0 block" style="display: block"></div> {% endcomment %}

    <div class="col-start-1 row-start-1 relative z-10 mx-auto px-32 flex flex-col w-full h-full justify-start pt-[10vw] text-white">
        <!-- Heading -->
        <h2 class="text-[4rem] font-normal mb-6 text-white">
            {{ section.settings.heading }}
        </h2>

        <!-- Description -->
        <p class="mb-8 max-w-3xl">
            {{ section.settings.description }}
        </p>

        <!-- Newsletter form -->
        {% form 'customer', class: 'flex flex-col sm:flex-row gap-4 max-w-[44rem]' %}
            <input type="hidden" name="contact[tags]" value="newsletter">

            <div
                    class="max-w-[44rem] w-full {% if settings.animations_reveal_on_scroll %} scroll-trigger animate--slide-in{% endif %}"
                    {% if settings.animations_reveal_on_scroll %}
                        data-cascade
                        style="--animation-order: {{ forloop.index }};"
                    {% endif %}
            >
                <div class="z-[0] relative w-full flex transition-[box-shadow var(--duration-short) ease]">
                    {% comment %}placeholder-gray-200 hover:placeholder-white focus:placeholder-white {% endcomment %}
                    <input
                            id="MagNewsletterForm--{{ section.id }}"
                            type="email"
                            name="contact[email]"
                            class="mag-field-input pr-[5rem] placeholder-transparent flex-grow-[1] border-b border-solid border-gray-300 hover:border-white focus:border-white focus:border-b focus:outline-none focus:shadow-none text-left py-[1.5rem] pl-[1.5rem] m-[var(--inputs-border-width)] transition-[box-shadow var(--duration-short) ease] text-[1.6rem] appearance-none bg-transparent"
                            value="{{ form.email }}"
                            aria-required="true"
                            autocorrect="off"
                            autocapitalize="off"
                            autocomplete="email"
                            {% if form.errors %}
                                autofocus
                                aria-invalid="true"
                                aria-describedby="Newsletter-error--{{ section.id }}"
                            {% elsif form.posted_successfully? %}
                                aria-describedby="Newsletter-success--{{ section.id }}"
                            {% endif %}
                            placeholder="{{ 'newsletter.label' | t }}"
                            required
                    >

                    <label class="mag-field-label text-gray-300" for="MagNewsletterForm--{{ section.id }}">
                        {{ 'newsletter.label' | t }}
                    </label>

                    <button
                            type="submit"
                            class="w-auto m-0 p-0 overflow-hidden flex flex-row cursor-pointer items-center space-x-4 absolute top-0 bottom-0 my-auto right-0"
                            name="commit"
                            id="Subscribe"
                            aria-label="{{ 'newsletter.button_label' | t }}"
                    ><span>Sign up</span>
                    <span class="svg-wrapper">
                      {{- 'icon-arrow.svg' | inline_asset_content -}}
                    </span>
                    </button>
                </div>
                {%- if form.errors -%}
                    <small class="newsletter-form__message form__message" id="Newsletter-error--{{ section.id }}">
                    <span class="svg-wrapper">
                      {{- 'icon-error.svg' | inline_asset_content -}}
                    </span>
                        {{- form.errors.translated_fields.email | capitalize }}
                        {{ form.errors.messages.email -}}
                    </small>
                {%- endif -%}
            </div>
            {%- if form.posted_successfully? -%}
                <h3
                        class="newsletter-form__message newsletter-form__message--success form__message"
                        id="Newsletter-success--{{ section.id }}"
                        tabindex="-1"
                        autofocus
                >
                  <span class="svg-wrapper">
                    {{- 'icon-success.svg' | inline_asset_content -}}
                  </span>
                    {{- 'newsletter.success' | t }}
                </h3>
            {%- endif -%}

        {% endform %}
    </div>
</section>

{% schema %}
{
  "name": "Newsletter - MAG",
  "settings": [
    {
      "type": "image_picker",
      "id": "bg_image",
      "label": "Background image"
    },
    {
      "type": "inline_richtext",
      "id": "heading",
      "label": "Heading",
      "default": "Join our world"
    },
    {
      "type": "text",
      "id": "description",
      "label": "Description",
      "default": "Subscribe to our newsletter and be updated on unique collections and new launches."
    },
    {
      "type": "text",
      "id": "button_label",
      "label": "Button label",
      "default": "View All"
    }
  ],
  "presets": [
    {
      "name": "Newsletter - MAG"
    }
  ]
}
{% endschema %}

